@config "../tailwind.config.lit.cjs";

:host {
  @apply flex flex-col items-start w-full relative px-2 select-none;
}

.message-container {
  @apply relative my-1.5 max-w-[80%] block whitespace-pre-line break-words rounded px-2 py-1 text-left shadow;
  @apply select-text selection:bg-primary-color selection:text-white;
  @apply snap-end scroll-my-1;
}

:host(:not([status])) .message-container {
  background: var(--kite-msg-bg, white);
}

:host([status]) .message-container {
  background: var(--kite-msg-sent-bg, theme('colors.stone.300'));
  @apply self-end;
}

:host([selected]) .message-container {
  filter: opacity(0.7);
}

.message-container::before {
  @apply content-[''] absolute w-0 h-0 top-0;
  border: 10px solid transparent !important;
}

:host(:not([status])) .message-container::before {
  left: -0.375rem;
  border-top-color: var(--kite-msg-border, white) !important;
}

:host([status]) .message-container::before {
  right: -0.375rem;
  border-top-color: var(--kite-msg-sent-border, theme('colors.stone.300')) !important;
}

time {
  @apply opacity-60 text-sm relative m-1 !float-right bottom-[-0.375rem] select-none;
}

span {
  @apply no-underline relative !float-right [letter-spacing:-0.3em] select-none text-neutral-500;
}

:host([edited]) time::before {
  @apply content-['(edited)'] relative right-1 opacity-60 text-sm float-left tracking-normal;
}

span::after {
  position: relative;
  bottom: -0.5rem;
}

span.read::after,
span.delivered::after {
  color: theme('colors.primary-color');
}

span.sent::after,
span.delivered::after {
  content: '✓';
}

span.read::after {
  content: '✓✓';
}

span.failed::after {
  content: '✗';
  color: theme('colors.red.500');
}

span {
  @apply text-neutral-200;
}

.message-container::after {
  @apply absolute w-6 h-6 right-[-2rem] top-1/2 translate-y-[-50%];
}

:host([selected])::before {
  @apply absolute content-[''] bottom-0 left-0 w-full h-full bg-primary-color opacity-40;
}