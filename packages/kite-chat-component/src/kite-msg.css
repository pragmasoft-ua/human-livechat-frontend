@config "../tailwind.config.lit.cjs";

:host {
  @apply flex flex-col items-start w-full relative px-2 select-none py-1.5 box-border snap-end;
}

.message-container {
  @apply relative max-w-[80%] block break-words rounded px-2 py-1 text-left shadow;
  @apply select-text selection:bg-primary-color selection:text-white;
  @apply scroll-my-1;
}

slot:not([name]) {
  @apply whitespace-pre-line;
}

:host(:not([status])) .message-container {
  background: var(--kite-msg-bg, white);
}

:host([status]) .message-container {
  background: var(--kite-msg-sent-bg, theme('colors.stone.300'));
  @apply self-end;
}

:host([selected]) .message-container {
  filter: opacity(0.7);
}

.message-container::before {
  @apply content-[''] absolute w-0 h-0 top-0;
  border: 10px solid transparent !important;
}

:host(:not([status])) .message-container::before {
  left: -0.375rem;
  border-top-color: var(--kite-msg-border, white) !important;
}

:host([status]) .message-container::before {
  right: -0.375rem;
  border-top-color: var(--kite-msg-sent-border, theme('colors.stone.300')) !important;
}

time {
  @apply opacity-60 text-sm mx-1;
}

span.status {
  @apply no-underline float-right [letter-spacing:-0.3em] text-neutral-500;
}

span.info-container {
  @apply float-right select-none bottom-[-0.375rem] mt-1 text-[inherit];
  white-space: nowrap;
}

:host([edited]) time::before {
  @apply content-['(edited)'] relative opacity-60 text-sm float-left tracking-normal;
}

span.read::after,
span.delivered::after {
  color: theme('colors.primary-color');
}

span.sent::after,
span.delivered::after {
  content: '✓';
}

span.read::after {
  content: '✓✓';
}

span.failed::after {
  content: '✗';
  color: theme('colors.red.500');
}

span {
  @apply text-neutral-200;
}

.message-container::after {
  @apply absolute w-6 h-6 right-[-2rem] top-1/2 translate-y-[-50%];
}

:host([selected])::before {
  @apply absolute !content-[''] bottom-0 left-0 w-full h-full bg-primary-color opacity-40;
}

::slotted(kite-custom-keyboard) {
  --gap: var(--kite-inline-keyboard-gap, 0.25rem);
  --buttons-border-radius: var(--kite-inline-keyboard-buttons-border-radius, 0.125rem);
  --buttons-background: var(--kite-inline-keyboard-buttons-background, rgba(0, 0, 0, 0.4));
  --buttons-hover-background: var(--kite-inline-keyboard-buttons-hover-background, rgba(0, 0, 0, 0.3));
  --buttons-active-background: var(--kite-inline-keyboard-buttons-active-background, rgba(0, 0, 0, 0.2));
  @apply mt-1 w-full h-fit;
}